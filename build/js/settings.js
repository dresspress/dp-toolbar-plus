/*! For license information please see settings.js.LICENSE.txt */
(()=>{"use strict";var e,t={412:(e,t,o)=>{const r=window.wp.domReady;var n=o.n(r);const l=window.wp.apiFetch;var a=o.n(l);const i=window.wp.i18n,s=window.wp.components,c=window.wp.data,u=window.wp.element,p=window.wp.notices,d=window.lodash;var f=o.n(d),b=o(893);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function h(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function v(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?h(Object(o),!0).forEach((function(t){y(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function y(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=x(e);if(t){var n=x(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return O(this,o)}}function O(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==o)return;var r,n,l=[],a=!0,i=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(l.push(r.value),!t||l.length!==t);a=!0);}catch(e){i=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(i)throw n}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}var k=function(){var e=(0,c.useSelect)((function(e){return e(p.store).getNotices().filter((function(e){return"snackbar"===e.type}))}),[]),t=(0,c.useDispatch)(p.store).removeNotice;return(0,b.jsx)(s.SnackbarList,{className:"dp-toolbar-settings-notices",notices:e,onRemove:t})},P=[],E=[],N=dpToolbarSettings,T=dpToolbarSettings.roles;console.log(N);for(var R=0,F=Object.entries(T);R<F.length;R++){var A=S(F[R],2),D=A[0],I=A[1];P.push({label:I.name,value:D}),E=E.concat(Object.keys(I.capabilities))}E=f().uniq(E);var B=function(e){e.label;var t=e.onChange,o=e.active,r=void 0!==o&&o,n=e.action,l=void 0===n?"":n,a=e.logged_in,c=void 0!==a&&a,u=e.not_logged_in,p=void 0===u||u,d=e.roles,_=void 0===d?[]:d,h=e.caps,v=void 0===h?[]:h,y=e.scope,g=void 0===y?"":y;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.CheckboxControl,{label:(0,i.__)("Enable display rule for front-end Toolbar","dp-toolbar-plus"),checked:r,onChange:function(e){t({active:e})}}),r&&(0,b.jsxs)("div",{className:"dp-toolbar-display-rule",children:[(0,b.jsxs)(s.__experimentalHStack,{align:"center",justify:"flex-start",children:[(0,b.jsx)(s.SelectControl,{labelPosition:"side",value:l,options:[{label:(0,i.__)("Show Toolbar","dp-toolbar-plus"),value:"show"},{label:(0,i.__)("Hide Toolbar","dp-toolbar-plus"),value:"hide"}],onChange:function(e){t({action:e})}}),(0,b.jsx)(s.SelectControl,{labelPosition:"side",value:g,options:[{label:(0,i.__)("for all users","dp-toolbar-plus"),value:"all"},{label:(0,i.__)("for all users except administrators","dp-toolbar-plus"),value:"not_admins"},{label:(0,i.__)("for logged in users","dp-toolbar-plus"),value:"logged_in"},{label:(0,i.__)("for non-logged in users","dp-toolbar-plus"),value:"not_logged_in"},{label:(0,i.__)("for custom user scope","dp-toolbar-plus"),value:"custom"}],onChange:function(e){t({scope:e})}})]}),"custom"==g&&(0,b.jsxs)("div",{className:"dp-toolbar-custom-scope",children:[(0,b.jsx)(s.CheckboxControl,{label:(0,i.__)("All non-logged in users","dp-toolbar-plus"),checked:p,onChange:function(e){t({not_logged_in:e})}}),(0,b.jsx)(s.CheckboxControl,{label:(0,i.__)("All logged in users ","dp-toolbar-plus"),checked:c,onChange:function(e){t({logged_in:e})}}),c&&(0,b.jsxs)("div",{className:"dp-toolbar-roles-control",children:[(0,b.jsx)("label",{children:(0,i.__)("with one of selected roles:","dp-toolbar-plus")}),(0,b.jsx)("div",{className:"dp-toolbar-roles-option-list",children:P.map((function(e,o){return(0,b.jsx)(s.CheckboxControl,{label:e.label,checked:_.includes(e.value),value:e.value,onChange:function(o){_=o?f().union(_,[e.value]):f().without(_,e.value),t({roles:_})}},o)}))})]}),c&&(0,b.jsx)("div",{className:"dp-toolbar-caps-control",children:(0,b.jsx)(s.FormTokenField,{label:(0,i.__)("AND have one of selected capabilities:","textdomai"),value:v,placeholder:(0,i.__)("e.g. manage_options"),suggestions:E,tokenizeOnSpace:!0,onChange:function(e){t({caps:e})},__experimentalExpandOnFocus:!0,__experimentalValidateInput:function(e){return E.includes(e)}})})]})]})]})},q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(l,e);var t,o,r,n=w(l);function l(){var e;g(this,l);return(e=n.apply(this,arguments)).state={front_display_rule:N.front_display_rule,disable_user_pref:N.disable_user_pref,auto_hide_show:N.auto_hide_show,remove_wp_logo:N.remove_wp_logo,isSaving:!1},e}return t=l,(o=[{key:"render",value:function(){var e=this,t=this.state,o=t.front_display_rule,r=(t.admin_display_rule,t.disable_user_pref),n=t.auto_hide_show,l=t.remove_wp_logo,u=t.isSaving;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"dp-admin-page-header",children:(0,b.jsx)("div",{className:"dp-admin-page-header-container",children:(0,b.jsx)("h1",{className:"dp-admin-page-title",children:(0,i.__)("Toolbar Settings","dp-toolbar-plus")})})}),(0,b.jsxs)("div",{className:"dp-admin-page-body",children:[(0,b.jsxs)("div",{className:"dp-admin-page-content",children:[(0,b.jsxs)(s.Panel,{children:[(0,b.jsx)(s.PanelBody,{opened:!0,title:(0,i.__)("General","dp-toolbar-plus"),children:(0,b.jsx)(s.CheckboxControl,{label:(0,i.__)("Remove WP logo from toolbar","dp-toolbar-plus"),checked:l,onChange:function(t){e.setState({remove_wp_logo:t})}})}),(0,b.jsxs)(s.PanelBody,{opened:!0,title:(0,i.__)("Front-end Toolbar","dp-toolbar-plus"),children:[(0,b.jsx)(B,v(v({label:(0,i.__)("Front-end Toolbar display rule","dp-toolbar-plus")},o),{},{onChange:function(t){e.setState({front_display_rule:v(v({},o),t)})}})),(0,b.jsx)(s.CheckboxControl,{label:(0,i.__)("Force disable Toolbar preference from Edit Profile page","dp-toolbar-plus"),checked:r,onChange:function(t){e.setState({disable_user_pref:t})}}),(0,b.jsx)(s.CheckboxControl,{label:(0,i.__)("Automatically hide and show the toolbar","dp-toolbar-plus"),checked:n,onChange:function(t){e.setState({auto_hide_show:t})}})]})]}),(0,b.jsx)("p",{className:"dp-admin-page-save-settings",children:(0,b.jsx)(s.Button,{isPrimary:!0,isBusy:u,onClick:function(){e.setState({isSaving:!0}),a()({path:"/wp/v2/settings",method:"POST",data:{dp_toolbar_settings:{front_display_rule:o,disable_user_pref:r,auto_hide_show:n,remove_wp_logo:l}}}).then((function(){e.setState({isSaving:!1}),(0,c.dispatch)("core/notices").createNotice("success",(0,i.__)("Settings saved.","dp-toolbar-plus"),{type:"snackbar",isDismissible:!0,id:"save-settings-notice",actions:[{url:"/",label:(0,i.__)("View site")}]})})).catch((function(e){console.error("Error:",e)}))},children:u?(0,i.__)("Saving","dp-toolbar-plus"):(0,i.__)("Save Settings","dp-toolbar-plus")})})]}),(0,b.jsx)(k,{})]})]})}}])&&m(t.prototype,o),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(u.Component);n()((function(){var e=document.querySelector(".dp-admin-page-wrap");e&&(0,u.render)((0,b.jsx)(q,{}),e)}))},284:()=>{},418:e=>{var t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},o=0;o<10;o++)t["_"+String.fromCharCode(o)]=o;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,l){for(var a,i,s=n(e),c=1;c<arguments.length;c++){for(var u in a=Object(arguments[c]))o.call(a,u)&&(s[u]=a[u]);if(t){i=t(a);for(var p=0;p<i.length;p++)r.call(a,i[p])&&(s[i[p]]=a[i[p]])}}return s}},251:(e,t,o)=>{o(418);var r=o(196),n=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var l=Symbol.for;n=l("react.element"),t.Fragment=l("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,o){var r,l={},c=null,u=null;for(r in void 0!==o&&(c=""+o),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!s.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===l[r]&&(l[r]=t[r]);return{$$typeof:n,type:e,key:c,ref:u,props:l,_owner:a.current}}t.jsx=c,t.jsxs=c},893:(e,t,o)=>{e.exports=o(251)},196:e=>{e.exports=window.React}},o={};function r(e){var n=o[e];if(void 0!==n)return n.exports;var l=o[e]={exports:{}};return t[e](l,l.exports,r),l.exports}r.m=t,e=[],r.O=(t,o,n,l)=>{if(!o){var a=1/0;for(u=0;u<e.length;u++){for(var[o,n,l]=e[u],i=!0,s=0;s<o.length;s++)(!1&l||a>=l)&&Object.keys(r.O).every((e=>r.O[e](o[s])))?o.splice(s--,1):(i=!1,l<a&&(a=l));if(i){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[o,n,l]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={923:0,971:0};r.O.j=t=>0===e[t];var t=(t,o)=>{var n,l,[a,i,s]=o,c=0;if(a.some((t=>0!==e[t]))){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(s)var u=s(r)}for(t&&t(o);c<a.length;c++)l=a[c],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(u)},o=self.webpackChunkdp_toolbar_plus=self.webpackChunkdp_toolbar_plus||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})(),r.O(void 0,[971],(()=>r(412)));var n=r.O(void 0,[971],(()=>r(284)));n=r.O(n)})();
//# sourceMappingURL=settings.js.map